<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Test componente</title>
<script type="text/javascript"
	src="https://code.jquery.com/jquery-2.2.0.js"></script>
	
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/qtip2/2.2.1/basic/jquery.qtip.js"></script>
<script type="text/javascript" src="../js/libs/cytoscape.js"></script>
<script type="text/javascript" src="../js/libs/dagre.js"></script>
<script type="text/javascript" src="../js/libs/cytoscape-dagre.js"></script>

<script type="text/javascript" src="../js/libs/cytoscape-qtip.js"></script>
<script type="text/javascript" src="../js/ii.sparql.main.js"></script>
<script type="text/javascript" src="../js/ii.sparql.util.js"></script>
<script type="text/javascript" src="../js/ii.sparql.format.treemap.js"></script>
<script type="text/javascript" src="../js/ii.d3.js"></script>
<script type="text/javascript" src="../js/libs/d3.v3.min.js"></script>









<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/qtip2/2.2.1/basic/jquery.qtip.css" >
<link rel="stylesheet" href="../css/jquery.jqplot.min.css" >
<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">
<style>
#mynetwork-treemap {
  width: 960px;
  height: 500px;
  background: #ddd;
}

text {
  pointer-events: none;
}

.grandparent text {
  font-weight: bold;
}

rect {
  fill: none;
  stroke: #fff;
}

rect.parent,
.grandparent rect {
  stroke-width: 2px;
}

.grandparent rect {
  fill: orange;
}

.grandparent:hover rect {
  fill: #ee9700;
}

.children rect.parent,
.grandparent rect {
  cursor: pointer;
}

.children rect.parent {
  fill: #bbb;
  fill-opacity: .5;
}

.children:hover rect.child {
  fill: #bbb;
}



</style>

</head>
<body>


	<script type="text/javascript">
 var smwQueryPrefixes = window.smwQueryPrefixes = [];
 smwQueryPrefixes.push({
 	pre : 'ii-app-m',
 	ns : 'http://www.imolinfo.it/ontologie/ea/v1/ii-application-domain-model#'
 });
 smwQueryPrefixes.push({
 	pre : 'ii-overall-m',
 	ns : 'http://www.imolinfo.it/ontologie/ea/v2/ii-overall-model#'
 });
 smwQueryPrefixes
 		.push({
 			pre : 'abi-app',
 			ns : 'http://www.imolinfo.it/ontologie/abi-lab/v3/abilab_tassonomia_applicativa#'
 		});
 smwQueryPrefixes
 		.push({
 			pre : 'abi-inf',
 			ns : 'http://www.imolinfo.it/ontologie/abi-lab/v4/abilab_tassonomia_infrastrutturale#'
 		});
 smwQueryPrefixes
 		.push({
 			pre : 'abi-proc',
 			ns : 'http://www.imolinfo.it/ontologie/abi-lab/v2/abilab_tassonomia_processi#'
 		});
 smwQueryPrefixes.push({
 	pre : 'ent-m',
 	ns : 'http://www.imolinfo.it/ontologie/ea/v2/enterprise-domain-model#'
 });
 smwQueryPrefixes.push({
 	pre : 'skos',
 	ns : 'http://www.w3.org/2004/02/skos/core#'
 });
 smwQueryPrefixes.push({
 	pre : 'foaf',
 	ns : 'http://xmlns.com/foaf/0.1/'
 });
 smwQueryPrefixes.push({
 	pre : 'project-domain-model',
 	ns : 'http://www.imolinfo.it/ontologie/v2/project-domain-model#'
 });
 smwQueryPrefixes.push({
 	pre : 'rdf',
 	ns : 'http://www.w3.org/1999/02/22-rdf-syntax-ns#'
 });
 smwQueryPrefixes.push({
 	pre : 'rdfs',
 	ns : 'http://www.w3.org/2000/01/rdf-schema#'
 });
 smwQueryPrefixes.push({
 	pre : 'ii-bus-m',
 	ns : 'http://www.imolinfo.it/ontologie/ea/v1/ii-business-model#'
 });
 smwQueryPrefixes.push({
 	pre : 'ubi-overall-m',
 	ns : 'http://www.ubibanca.com/ontologies/ea/v1/ubi-overall-model#'
 });
 smwQueryPrefixes.push({
 	pre : 'ii-inf-m',
 	ns : 'http://www.imolinfo.it/ontologie/ea/v1/ii-infrastructure-model#'
 });
    $(document).ready(function() {
        var config={};
        config.divId="mynetwork-treemap"
        config.divStyle="width:100%;height:530px;"
        config.endpoint= "https://ubiss-test.imolinfo.it/fuseki/dsread/query"
        config.sparql = $("#"+config.divId).attr("sparql-query");
		config.queryPrefixes=smwQueryPrefixes;
        config.linkBasePath="https://ubiss-test.imolinfo.it/eap/index.php/";
        config.spinnerImagePath=config.linkBasePath+"../resources/src/jquery/images/spinner-large.gif";
        config.nodeStyle = {};
        config.edgeStyle = {};
 	 config.rootElement="Tassonomia Applicativa ABILab";
        config.basicAuthBase64String="YWRtaW46YmNlMjYz";
        config.seriesConfiguration = [{label:'# of applications', color:'blue'},{label:'# of components',color:'red'} ]
	 config.chartTitle='Informatic Resource, application and components'
        spqlib.sparql2Treemap(config);
        

    });
    
</script>	
<div id="mynetwork-treemap" style="" sparql-query="
SELECT distinct ?parent_label ?child_label ?value 
WHERE {
  GRAPH <http://www.ubibanca.com/ontologie/ea-wiki/ubi-wiki-instances-graph> {
 ?child abi-app:haClassificazioneApplicativaABILab ?parent.
    ?parent rdfs:label ?parent_label.
    ?child rdfs:label ?child_label.
     ?parent rdf:type  ?parent_type.
    ?child rdf:type  ?child_type.
}
}">
</div>
</body>
</html>